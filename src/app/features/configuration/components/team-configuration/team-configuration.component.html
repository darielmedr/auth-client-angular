<div class="actions">
    <form [formGroup]="filterForm" class="actions__filter">
        <p>
            <mat-form-field appearance="outline">
                <mat-label>Filter</mat-label>
                <input matInput formControlName="filter" placeholder="Type the filter criteria of any column" type="search"
                    #filterInput />
                <mat-icon matSuffix>filter_alt</mat-icon>
            </mat-form-field>
        </p>
    </form>

    <button mat-flat-button color="primary" [routerLink]="['new']" class="actions__invite-member">
        Invite member
    </button>
</div>

<div class="table-wrapper mat-elevation-z2">
    <table mat-table [dataSource]="dataSource" matSort class="table">
        <!-- Team member's name Column -->
        <ng-container matColumnDef="name">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
            <td mat-cell *matCellDef="let element">{{ element.name }}</td>
        </ng-container>

        <!-- Email Column -->
        <ng-container matColumnDef="email">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Email</th>
            <td mat-cell *matCellDef="let element">{{ element.email }}</td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Status</th>
            <td mat-cell *matCellDef="let element">
                {{ element.status }}
            </td>
        </ng-container>

        <!-- Actions Column -->
        <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef class="table__actions">Actions</th>
            <td mat-cell *matCellDef="let element" class="table__actions">
                <button mat-icon-button aria-label="edit member" color="accent" [routerLink]="['./edit']" [state]="element">
                    <mat-icon>edit</mat-icon>
                </button>
                <button mat-icon-button aria-label="delete member" color="warn" (click)="deleteMember(element.id)">
                    <mat-icon>delete</mat-icon>
                </button>
            </td>
        </ng-container>

        <!-- Rows -->
        <tr mat-header-row *matHeaderRowDef="columnsToDisplay, sticky: true"></tr>
        <tr mat-row *matRowDef="let rowData; columns: columnsToDisplay"></tr>

        <!-- Row shown when there is no data -->
        <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell" colspan="5" *ngIf="!filterInput.value && !dataSource; else loading">
                The list is empty
            </td>
            <td class="mat-cell" colspan="5" *ngIf="filterInput.value">
                No data matching the filter "{{ filterInput.value }}"
            </td>
        </tr>
    </table>

    <mat-paginator [pageSizeOptions]="[10, 20, 50]"> </mat-paginator>
</div>

<ng-template #loading>
    <div *ngIf="isLoading$ | async">
        <mat-spinner></mat-spinner>
    </div>
</ng-template>
